<!DOCTYPE html>
<html>

<body>
  <h1>Are you running localhost?</h1>
  <audio id="aud1" src="buzz.wav" crossorigin="anonymous"></audio>
  <script type="text/javascript">
    const audioCtx = new AudioContext();
    const listener = audioCtx.listener;
    // innerwidth is the width of the browser. This changes as the browser window is resized
    
    window.innerWidth = 1000;
    window.innerHeight = 1000;

    listener.positionX.value = 500
    console.log(listener.positionX.value);
    listener.positionY.value = 500
    console.log(listener.positionY.value);
    listener.positionZ.value = 250
    console.log(listener.positionZ.value);

    listener.forwardX.value = 0;
    listener.forwardY.value = 0;
    listener.forwardZ.value = 0;
    listener.upX.value = 0;
    listener.upY.value = 0;
    listener.upZ.value = 0;
    const pannerModel = 'HRTF';
    const distanceModel = 'linear';
    const maxDistance = 10000;
    const refDistance = 1;
    const rollOff = 10;
    const Pan_positionX = -1000;
    const Pan_positionY = 1000;
    const Pan_positionZ = 300;
    const Pan_orientationX = 0.0;
    const Pan_orientationY = 0.0;
    const Pan_orientationZ = -1.0;

    const panner = new PannerNode(audioCtx, {
      panningModel: pannerModel,
      distanceModel: distanceModel,
      positionX: Pan_positionX,
      positionY: Pan_positionY,
      positionZ: Pan_positionZ,
      orientationX: Pan_orientationX,
      orientationY: Pan_orientationY,
      orientationZ: Pan_orientationZ,
      refDistance: refDistance,
      maxDistance: maxDistance,
      rolloffFactor: rollOff,
      coneInnerAngle: 20,
      coneOuterAngle: 20,
      coneOuterGain: 1 
    })

    const audioElement = document.getElementById("aud1");
    const track = audioCtx.createMediaElementSource(audioElement);
    const pannerOptions = {pan:-1}; // 0 for both 1 for right
    const stereoPanner = new StereoPannerNode(audioCtx, pannerOptions);
    track.connect(stereoPanner).connect(panner).connect(audioCtx.destination);
  </script>

  